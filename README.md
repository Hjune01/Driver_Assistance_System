# 🚗 AI 차량 운행 보조 시스템 – 시야 자동 보정 및 LED 제어

---

## 📌 프로젝트 개요

본 시스템은 차량 주행 중 **USB 카메라**를 통해 실시간으로 전방 상황을 분석하고, **주변 밝기 및 차량/차선 존재 여부**를 파악하여  
야간 시야 확보를 위한 **상향등(LED) 자동 제어 기능**을 제공하는 차량 운행 보조 시스템입니다.

**Raspberry Pi**와 **OpenCV** 기반으로 구성되며, **YOLOv5**와 이미지 처리 알고리즘을 활용하여  
**낮/밤 인식**, **전방 차량 유무 인식**, **차선 추적** 등의 기능을 통합 제공합니다.

---

## 🎯 프로젝트 목적

- 실시간 영상 기반의 주행 환경 인식 시스템 구현  
- 간단한 임베디드 AI 시스템 설계 및 응용 역량 강화  
- 운전자 시야 확보를 위한 자동 LED 제어 알고리즘 개발  
- Raspberry Pi에서 YOLO와 OpenCV의 효율적 활용 능력 확보  

---

## 🧩 주요 기능

| 기능             | 설명 |
|------------------|------|
| 낮/밤 판별        | 카메라 영상에서 평균 밝기 측정 (임계값 기반 분류) |
| 전방 차량 인식     | YOLOv5로 차량 존재 여부 탐지 |
| 차선 인식         | OpenCV 기반 차선 검출 (Canny + HoughLines) |
| LED 제어         | 조건에 따라 GPIO 핀을 통해 LED(상향등) ON/OFF |
| 실시간 영상 출력   | 분석 결과를 영상에 오버레이하여 LCD 또는 화면에 출력 |

---

## 💡 사용 시나리오 (Use Case)

1. Raspberry Pi와 USB 카메라, LED 회로 설치  
2. 차량 운행 중 실시간 영상 분석 시작  
3. **밤이며, 전방 차량이 감지되지 않을 경우 → LED ON**  
4. **낮이거나 전방 차량이 있는 경우 → LED OFF**  
5. 차선 인식 결과도 함께 시각화되어 표시  

---

## 🛠️ 기술 스택

| 항목                 | 사용 기술 및 도구                                                                                                                    |
|----------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| **영상 입력**          | `cv2.VideoCapture`를 통한 USB 웹캠 실시간 스트리밍                                                                                        |
| **밝기 판단**          | OpenCV Grayscale 변환 + `numpy.mean()`을 활용한 조도 판단                                                                               |
| **야간 화질 보정**       | CLAHE (국소 대비 향상), Median Blur, 감마 보정 함수                                                                                       |
| **차량 탐지 (학습)**     | YOLOv5s / YOLOv5n 모델<br>PyTorch 기반 `train.py` 실행 (Google Colab 환경)<br>커스텀 데이터셋 zip 업로드 및 YOLO 포맷 구조 (`images/`, `labels/`) 사용 |
| **차량 탐지 (추론)**     | `detect.py` 실행을 통한 실시간 객체 감지<br>또는 ONNX 변환을 통한 경량화 추론 (라즈베리파이용)                                                               |
| **차선 인식 (세그멘테이션)** | `LLDNet.h5` 딥러닝 모델 사용 (Keras/TensorFlow 기반)<br>입력 크기 `(160, 80)`, 출력 마스크 시각화 및 평균화                                            |
| **LED 제어**           | Raspberry Pi의 `RPi.GPIO` 또는 `gpiozero`를 통한 핀 제어                                                                               |
| **모델 성능 평가**       | Dice Loss, IOU, Precision/Recall/F1 Score 커스텀 metric 정의                                                                       |
| **하드웨어 구성**        | Raspberry Pi 4 + USB 카메라 + LED 회로 + (선택적 LCD 출력)                                                                              |
| **개발/훈련 환경**       | Google Colab (모델 학습), Raspberry Pi (실행), Python 3.x                                                                           |


---
